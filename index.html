<!DOCTYPE html>
<html lang="zh-Hant" class="h-full">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>YT 字幕批次下載器</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet" />
  <script src="https://cdn.tailwindcss.com?plugins=forms,typography,container-queries"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ["Inter", "Noto Sans TC", "sans-serif"],
          },
          colors: {
            brand: {
              50: "#f4f7ff",
              100: "#e9efff",
              200: "#cddaff",
              300: "#a8beff",
              400: "#7a97ff",
              500: "#4b6dff",
              600: "#2f4cf0",
              700: "#2439c8",
              800: "#2032a0",
              900: "#1f2d7f",
            },
          },
        },
      },
    };
  </script>
</head>
<body class="h-full bg-slate-950 text-white">
  <div class="min-h-full">
    <header class="border-b border-white/10 bg-slate-950/80 backdrop-blur">
      <div class="mx-auto flex w-full max-w-6xl flex-wrap items-center justify-between gap-4 px-6 py-6">
        <div>
          <p class="text-sm font-semibold text-brand-300">YT Transcript Studio</p>
          <h1 class="text-2xl font-bold tracking-tight">輸入頻道網址，一次抓齊所有影片字幕</h1>
          <p class="mt-2 max-w-2xl text-sm text-white/70">
            支援下載逐字稿（TXT / JSON）與字幕檔（SRT / VTT），可選擇指定語言與自動字幕。
          </p>
        </div>
        <div class="flex items-center gap-3 rounded-full border border-white/10 bg-white/5 px-4 py-2 text-xs text-white/70">
          <span class="h-2 w-2 rounded-full bg-emerald-400"></span>
          狀態：準備就緒
        </div>
      </div>
    </header>

    <main class="mx-auto grid w-full max-w-6xl gap-6 px-6 py-8 lg:grid-cols-[1.1fr_0.9fr]">
      <section class="space-y-6 rounded-3xl border border-white/10 bg-white/5 p-6 shadow-xl">
        <div class="flex items-center justify-between">
          <h2 class="text-lg font-semibold">下載設定</h2>
          <span class="rounded-full bg-brand-500/20 px-3 py-1 text-xs font-semibold text-brand-200">快速導入</span>
        </div>

        <form id="channel-form" class="space-y-5">
          <div>
            <label class="text-sm font-medium text-white/80" for="channel-url">Youtuber 頻道網址</label>
            <input
              id="channel-url"
              type="url"
              required
              placeholder="https://www.youtube.com/@creator 或 https://www.youtube.com/channel/UC..."
              class="mt-2 w-full rounded-2xl border border-white/10 bg-slate-950/70 px-4 py-3 text-sm text-white placeholder:text-white/40 focus:border-brand-400 focus:ring-brand-400"
            />
          </div>

          <div class="grid gap-4 md:grid-cols-2">
            <div>
              <label class="text-sm font-medium text-white/80" for="language-select">字幕語言</label>
              <select id="language-select" class="mt-2 w-full rounded-2xl border border-white/10 bg-slate-950/70 px-4 py-3 text-sm text-white focus:border-brand-400 focus:ring-brand-400">
                <option value="auto">自動偵測</option>
                <option value="zh-Hant" selected>繁體中文</option>
                <option value="zh-Hans">簡體中文</option>
                <option value="en">英文</option>
                <option value="ja">日文</option>
              </select>
            </div>
            <div>
              <label class="text-sm font-medium text-white/80">輸出格式</label>
              <div class="mt-2 grid grid-cols-2 gap-2">
                <label class="flex cursor-pointer items-center gap-2 rounded-2xl border border-white/10 bg-slate-950/70 px-3 py-2 text-xs">
                  <input type="checkbox" name="format" value="txt" checked class="rounded border-white/20 text-brand-400 focus:ring-brand-400" />
                  TXT 逐字稿
                </label>
                <label class="flex cursor-pointer items-center gap-2 rounded-2xl border border-white/10 bg-slate-950/70 px-3 py-2 text-xs">
                  <input type="checkbox" name="format" value="srt" checked class="rounded border-white/20 text-brand-400 focus:ring-brand-400" />
                  SRT 字幕
                </label>
                <label class="flex cursor-pointer items-center gap-2 rounded-2xl border border-white/10 bg-slate-950/70 px-3 py-2 text-xs">
                  <input type="checkbox" name="format" value="vtt" class="rounded border-white/20 text-brand-400 focus:ring-brand-400" />
                  VTT 字幕
                </label>
                <label class="flex cursor-pointer items-center gap-2 rounded-2xl border border-white/10 bg-slate-950/70 px-3 py-2 text-xs">
                  <input type="checkbox" name="format" value="json" class="rounded border-white/20 text-brand-400 focus:ring-brand-400" />
                  JSON 輸出
                </label>
              </div>
            </div>
          </div>

          <div class="grid gap-3 md:grid-cols-2">
            <label class="flex cursor-pointer items-start gap-3 rounded-2xl border border-white/10 bg-slate-950/70 px-4 py-3 text-sm">
              <input id="auto-caption" type="checkbox" checked class="mt-1 rounded border-white/20 text-brand-400 focus:ring-brand-400" />
              <span>
                <span class="font-medium">包含自動字幕</span>
                <span class="mt-1 block text-xs text-white/50">沒有人工字幕的影片會改抓自動生成字幕。</span>
              </span>
            </label>
            <label class="flex cursor-pointer items-start gap-3 rounded-2xl border border-white/10 bg-slate-950/70 px-4 py-3 text-sm">
              <input id="only-available" type="checkbox" class="mt-1 rounded border-white/20 text-brand-400 focus:ring-brand-400" />
              <span>
                <span class="font-medium">僅下載可用語言</span>
                <span class="mt-1 block text-xs text-white/50">只輸出該語言已提供的字幕。</span>
              </span>
            </label>
          </div>

          <div class="flex flex-wrap items-center gap-3">
            <button type="submit" class="flex items-center gap-2 rounded-full bg-brand-500 px-6 py-3 text-sm font-semibold text-white shadow-lg shadow-brand-500/40 transition hover:bg-brand-400">
              <span>開始抓取字幕</span>
              <span aria-hidden="true">→</span>
            </button>
            <button type="button" id="reset-btn" class="rounded-full border border-white/10 px-5 py-3 text-sm text-white/70 hover:border-white/30">
              重新輸入
            </button>
            <p class="text-xs text-white/40">完成後可選擇全部或部分影片下載。</p>
          </div>
        </form>
      </section>

      <aside class="space-y-6">
        <div class="rounded-3xl border border-white/10 bg-white/5 p-6">
          <h2 class="text-lg font-semibold">下載狀態</h2>
          <div class="mt-4 space-y-3 text-sm text-white/70">
            <div class="flex items-center justify-between">
              <span>頻道解析</span>
              <span id="status-channel" class="rounded-full bg-white/10 px-2 py-1 text-xs">待命</span>
            </div>
            <div class="flex items-center justify-between">
              <span>影片清單</span>
              <span id="status-list" class="rounded-full bg-white/10 px-2 py-1 text-xs">待命</span>
            </div>
            <div class="flex items-center justify-between">
              <span>字幕準備</span>
              <span id="status-captions" class="rounded-full bg-white/10 px-2 py-1 text-xs">待命</span>
            </div>
          </div>
          <div class="mt-5 rounded-2xl border border-white/10 bg-slate-950/60 p-4 text-xs text-white/60">
            <p class="font-semibold text-white/80">提醒</p>
            <ul class="mt-2 list-disc space-y-1 pl-4">
              <li>需要後端服務串接 YouTube Data API 與字幕服務。</li>
              <li>大量下載建議分批進行，以避免速率限制。</li>
            </ul>
          </div>
        </div>

        <div class="rounded-3xl border border-white/10 bg-gradient-to-br from-brand-500/30 via-slate-950/70 to-slate-950 p-6">
          <h3 class="text-base font-semibold">快速流程</h3>
          <ol class="mt-3 space-y-3 text-sm text-white/70">
            <li class="flex gap-3"><span class="mt-1 h-2 w-2 rounded-full bg-brand-400"></span>輸入頻道網址</li>
            <li class="flex gap-3"><span class="mt-1 h-2 w-2 rounded-full bg-brand-400"></span>選擇語言與格式</li>
            <li class="flex gap-3"><span class="mt-1 h-2 w-2 rounded-full bg-brand-400"></span>挑選影片並下載</li>
          </ol>
        </div>
      </aside>
    </main>

    <section class="mx-auto w-full max-w-6xl px-6 pb-16">
      <div class="rounded-3xl border border-white/10 bg-white/5 p-6">
        <div class="flex flex-wrap items-center justify-between gap-4">
          <div>
            <h2 class="text-lg font-semibold">影片清單</h2>
            <p class="text-sm text-white/60">可勾選影片並下載指定語言字幕。</p>
          </div>
          <div class="flex flex-wrap items-center gap-2">
            <button id="download-selected" class="rounded-full bg-brand-500 px-4 py-2 text-xs font-semibold text-white shadow-lg shadow-brand-500/30">下載已選取</button>
            <button id="download-all" class="rounded-full border border-white/20 px-4 py-2 text-xs text-white/70">下載全部</button>
          </div>
        </div>

        <div id="video-list" class="mt-6 grid gap-4"></div>
      </div>
    </section>
  </div>

  <template id="video-item-template">
    <div class="flex flex-wrap items-center justify-between gap-4 rounded-2xl border border-white/10 bg-slate-950/60 px-4 py-4">
      <label class="flex items-center gap-3 text-sm">
        <input type="checkbox" class="video-checkbox rounded border-white/20 text-brand-400 focus:ring-brand-400" />
        <span class="video-title font-medium"></span>
      </label>
      <div class="flex flex-wrap items-center gap-3 text-xs text-white/60">
        <span class="video-meta"></span>
        <span class="video-tags rounded-full bg-white/10 px-3 py-1"></span>
        <button class="download-single rounded-full border border-white/20 px-3 py-1 text-xs text-white/70">下載</button>
      </div>
    </div>
  </template>

  <div id="toast" class="pointer-events-none fixed bottom-6 left-1/2 hidden -translate-x-1/2 rounded-full bg-white px-4 py-2 text-sm font-semibold text-slate-900 shadow-lg"></div>

  <script>
    const form = document.getElementById("channel-form");
    const resetBtn = document.getElementById("reset-btn");
    const videoList = document.getElementById("video-list");
    const template = document.getElementById("video-item-template");
    const toast = document.getElementById("toast");

    const statusChannel = document.getElementById("status-channel");
    const statusList = document.getElementById("status-list");
    const statusCaptions = document.getElementById("status-captions");

    const sampleVideos = [
      { title: "一日剪輯流程公開", duration: "12:43", captions: "中/英", updated: "2 天前" },
      { title: "器材開箱與收音測試", duration: "08:20", captions: "中", updated: "5 天前" },
      { title: "剪輯軟體技巧分享", duration: "21:05", captions: "英", updated: "1 週前" },
      { title: "全片逐字稿下載示範", duration: "15:02", captions: "中/日", updated: "2 週前" },
      { title: "直播精華整理", duration: "30:11", captions: "自動", updated: "3 週前" },
    ];

    function setStatus(element, text, style) {
      element.textContent = text;
      element.className = `rounded-full px-2 py-1 text-xs ${style}`;
    }

    function showToast(message) {
      toast.textContent = message;
      toast.classList.remove("hidden");
      setTimeout(() => toast.classList.add("hidden"), 2400);
    }

    function renderVideos() {
      videoList.innerHTML = "";
      sampleVideos.forEach((video) => {
        const clone = template.content.cloneNode(true);
        clone.querySelector(".video-title").textContent = video.title;
        clone.querySelector(".video-meta").textContent = `${video.duration} ・ 更新 ${video.updated}`;
        clone.querySelector(".video-tags").textContent = `字幕：${video.captions}`;
        clone.querySelector(".download-single").addEventListener("click", () => {
          showToast(`已加入下載佇列：${video.title}`);
        });
        videoList.appendChild(clone);
      });
    }

    form.addEventListener("submit", (event) => {
      event.preventDefault();
      setStatus(statusChannel, "解析中", "bg-brand-500/20 text-brand-200");
      setStatus(statusList, "彙整中", "bg-brand-500/20 text-brand-200");
      setStatus(statusCaptions, "準備中", "bg-brand-500/20 text-brand-200");

      setTimeout(() => {
        setStatus(statusChannel, "完成", "bg-emerald-500/20 text-emerald-200");
        setStatus(statusList, "完成", "bg-emerald-500/20 text-emerald-200");
        setStatus(statusCaptions, "完成", "bg-emerald-500/20 text-emerald-200");
        renderVideos();
        showToast("已取得影片清單，請選擇要下載的內容。");
      }, 700);
    });

    resetBtn.addEventListener("click", () => {
      form.reset();
      videoList.innerHTML = "";
      setStatus(statusChannel, "待命", "bg-white/10");
      setStatus(statusList, "待命", "bg-white/10");
      setStatus(statusCaptions, "待命", "bg-white/10");
      showToast("已重設表單");
    });

    document.getElementById("download-selected").addEventListener("click", () => {
      const selected = document.querySelectorAll(".video-checkbox:checked").length;
      if (selected === 0) {
        showToast("請先勾選影片");
      } else {
        showToast(`開始下載 ${selected} 支影片字幕`);
      }
    });

    document.getElementById("download-all").addEventListener("click", () => {
      if (videoList.children.length === 0) {
        showToast("尚未取得影片清單");
      } else {
        showToast("已加入全部影片字幕下載");
      }
    });
  </script>
</body>
</html>
